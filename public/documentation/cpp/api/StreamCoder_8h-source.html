<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Xuggle: csrc/com/xuggle/xuggler/StreamCoder.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_699738047d3b635b5df656916dee49ce.html">csrc</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2cb158fd786e896c09be7d68a3b6a246.html">com</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_f3de956f4e588203bf9fcd5328f2c68a.html">xuggle</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5fb9c1226b415098404852adc3e90da.html">xuggler</a>
  </div>
</div>
</div>
<h1>StreamCoder.h</h1><a href="StreamCoder_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2008, 2010 Xuggle Inc.  All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment"> *  </span>
<a name="l00004"></a>00004 <span class="comment"> * This file is part of Xuggle-Xuggler-Main.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Xuggle-Xuggler-Main is free software: you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> * it under the terms of the GNU Lesser General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment"> * the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment"> * (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * Xuggle-Xuggler-Main is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> * GNU Lesser General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU Lesser General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> * along with Xuggle-Xuggler-Main.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment"> *******************************************************************************/</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef STREAMCODER_H_</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define STREAMCODER_H_</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;<a class="code" href="RefPointer_8h.html">com/xuggle/ferry/RefPointer.h</a>&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;<a class="code" href="IStreamCoder_8h.html">com/xuggle/xuggler/IStreamCoder.h</a>&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;com/xuggle/xuggler/FfmpegIncludes.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;<a class="code" href="Stream_8h.html">com/xuggle/xuggler/Stream.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="IBuffer_8h.html">com/xuggle/ferry/IBuffer.h</a>&gt;</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">namespace </span>com { <span class="keyword">namespace </span>xuggle { <span class="keyword">namespace </span>xuggler
<a name="l00030"></a>00030 {
<a name="l00031"></a>00031 
<a name="l00032"></a>00032   <span class="keyword">class </span>Codec;
<a name="l00033"></a>00033   <span class="keyword">class </span>Packet;
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">00035</a>   <span class="keyword">class </span><a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">StreamCoder</a> : <span class="keyword">public</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html" title="The work horse of the Xuggler: Takes IPacket data from an IContainer (representing...">IStreamCoder</a>
<a name="l00036"></a>00036   {
<a name="l00037"></a>00037     <a class="code" href="RefCounted_8h.html#9639009631e9fa82add107650d9a98b8">VS_JNIUTILS_REFCOUNTED_OBJECT_PRIVATE_MAKE</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">StreamCoder</a>)
<a name="l00038"></a>00038   <span class="keyword">public</span>:
<a name="l00039"></a>00039     <span class="comment">// IStreamCoder Interface implementation</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041     <span class="comment">/*</span>
<a name="l00042"></a>00042 <span class="comment">     * This section has all the Getters and Setters</span>
<a name="l00043"></a>00043 <span class="comment">     */</span>
<a name="l00044"></a><a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#6b832d9a8c2525e5df94b86ba02c958a">00044</a>     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#89070b18b2b728e7c93a73fb65a15099" title="The Direction in which this StreamCoder will work.">Direction</a> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#6b832d9a8c2525e5df94b86ba02c958a" title="Get the direction.">getDirection</a>() { <span class="keywordflow">return</span> mDirection; }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStream.html" title="Represents a stream of similar data (eg video) in a IContainer.">IStream</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#64063f8de647eb0f803d46286cbffe85" title="The associated Stream we&amp;#39;re working on.">getStream</a>();
<a name="l00047"></a>00047 
<a name="l00048"></a>00048     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html" title="A &amp;quot;key&amp;quot; to an IStreamCoder that tells it how to encode or decode data.">ICodec</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#38d1c2a946f744d7294c77d03f8a88dc" title="The Codec this StreamCoder will use.">getCodec</a>();
<a name="l00049"></a>00049     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html#1ce4619f17510ea1437e8be9c6af6bd4" title="The different types of Codecs that can exist in the system.">ICodec::Type</a> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#6ce7836919f663224cac2581894af3b7" title="A short hand for getCodec().getType().">getCodecType</a>();
<a name="l00050"></a>00050     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html#d438813180968adfeac774f4f0170e28" title="These are the codecs this library currently supports.">ICodec::ID</a> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#5c725f733f5a79b77b07634fcc697f4f" title="A short hand for getCodec().getID().">getCodecID</a>();
<a name="l00051"></a>00051 
<a name="l00052"></a>00052     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0d1c8aa67e3989f47ee5a11d82aaf2a9" title="Set the Codec to the passed in Codec, discarding the old Codec if set.">setCodec</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html" title="A &amp;quot;key&amp;quot; to an IStreamCoder that tells it how to encode or decode data.">ICodec</a> *);
<a name="l00053"></a>00053     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0d1c8aa67e3989f47ee5a11d82aaf2a9" title="Set the Codec to the passed in Codec, discarding the old Codec if set.">setCodec</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html#d438813180968adfeac774f4f0170e28" title="These are the codecs this library currently supports.">ICodec::ID</a>);
<a name="l00054"></a><a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#aeb23b6d11c94150844c8eb4590681fa">00054</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#aeb23b6d11c94150844c8eb4590681fa" title="Look up a Codec based on the passed in ID, and then set it.">setCodecID</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1ICodec.html#d438813180968adfeac774f4f0170e28" title="These are the codecs this library currently supports.">ICodec::ID</a> <span class="keywordtype">id</span>) { <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0d1c8aa67e3989f47ee5a11d82aaf2a9" title="Set the Codec to the passed in Codec, discarding the old Codec if set.">setCodec</a>(<span class="keywordtype">id</span>); }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#3ad76901b42de384c16bc717a131bda4" title="The bit rate.">getBitRate</a>();
<a name="l00057"></a>00057     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#b62eccf1830d7855da19c9fc6d680159" title="When ENCODING, sets the bit rate to use.">setBitRate</a>(int32_t rate);
<a name="l00058"></a>00058     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0118c37786830ca1cf6b0c9d0ba9fcf7" title="The bit rate tolerance.">getBitRateTolerance</a>();
<a name="l00059"></a>00059     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#b01fdd1a48ba21f453f21af54af2b494" title="When ENCODING set the bit rate tolerance.">setBitRateTolerance</a>(int32_t tolerance);
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     <span class="comment">// These are Video codec getters and setters</span>
<a name="l00062"></a>00062     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#4769d9bd31fdc7713ab8dfbd48215469" title="The height, in pixels.">getHeight</a>();
<a name="l00063"></a>00063     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#296b5949d5a4d95efc7b22759d21fbc3" title="Set the height, in pixels.">setHeight</a>(int32_t);
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#fdd15f63bad7f537ed57d16cb514e7f4" title="The width, in pixels.">getWidth</a>();
<a name="l00066"></a>00066     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#72e99ee4873a1ac9beae122566bb6deb" title="Set the width, in pixels.">setWidth</a>(int32_t);
<a name="l00067"></a>00067 
<a name="l00068"></a>00068     <span class="comment">// NOTE: Caller must release() return value when done.</span>
<a name="l00069"></a>00069     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#1cb4b1a1f636f6c9cfa929202e12c448" title="Get the time base this stream will ENCODE in, or the time base we detect while DECODING...">getTimeBase</a>();
<a name="l00070"></a>00070     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#577fe228e82875a2f7336761bd414ecf" title="Set the time base we&amp;#39;ll use to ENCODE with.">setTimeBase</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a>* newTimeBase);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <span class="comment">// These just forward to the stream we're coding</span>
<a name="l00073"></a>00073     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#b73447096b1ab3bbf1d4ac347ee90a9b" title="Get the frame-rate the attached stream claims to be using when DECODING, or the frame-rate...">getFrameRate</a>();
<a name="l00074"></a>00074     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#ed7307d0ffe04784b4123dd546cfb748" title="Set the frame rate we&amp;#39;ll set in the headers of this stream while ENCODING.">setFrameRate</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a> *newFrameRate);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#9362cb328c007ce98ee74cb5abd106a5" title="The the number of pictures in this Group of Pictures (GOP).">getNumPicturesInGroupOfPictures</a>();
<a name="l00077"></a>00077     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#37182d1c20e019bb80a52d4da4189f7e" title="Set the GOPS on this stream.">setNumPicturesInGroupOfPictures</a>(int32_t gops);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPixelFormat.html#f869b474f38ba0ecd392f05780d23742" title="Pixel format.">IPixelFormat::Type</a> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#6d1e20892c0edccaf8df3164fa7cd168" title="For Video streams, get the Pixel Format in use by the stream.">getPixelType</a>();
<a name="l00080"></a>00080     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#f86d01c6b6c439ab59a005ba4a738d39" title="Set the pixel format to ENCODE with.">setPixelType</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPixelFormat.html#f869b474f38ba0ecd392f05780d23742" title="Pixel format.">IPixelFormat::Type</a> pixelFmt);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="comment">// These are Audio codec getters and setters</span>
<a name="l00083"></a>00083     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#e406f7f0aaa28b55cc5194b61e4f41a2" title="Get the sample rate we use for this stream.">getSampleRate</a>();
<a name="l00084"></a>00084     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#3be6a2991af4984bbff29986ba06fd15" title="Set the sample rate to use when ENCODING.">setSampleRate</a>(int32_t sampleRate);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#f191e14f7153360d1cffd337c5274d8d" title="Get the number of channels in this audio stream.">getChannels</a>();
<a name="l00087"></a>00087     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#f9e830b559daf6b97441eb78e7161ca0" title="Set the number of channels to use when ENCODING.">setChannels</a>(int32_t channels);
<a name="l00088"></a>00088 
<a name="l00089"></a>00089     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IAudioSamples.html#ead23bd010e8f2248e042c0dc8911756" title="The format we use to represent audio.">IAudioSamples::Format</a> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#97e41cec0c1d23cdb701b5b57d969b35" title="Get the audio sample format.">getSampleFormat</a>();
<a name="l00090"></a>00090     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#8d7694b0fcfaeaf2cd102aea3064be02" title="Set the sample format when ENCODING.">setSampleFormat</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IAudioSamples.html#ead23bd010e8f2248e042c0dc8911756" title="The format we use to represent audio.">IAudioSamples::Format</a> aFormat);
<a name="l00091"></a>00091 
<a name="l00092"></a>00092     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0492afbd477f99707ebb0f2442b0aad9" title="Get the Global Quality setting this codec uses for video if a VideoPicture doesn&amp;#39;t...">getGlobalQuality</a>();
<a name="l00093"></a>00093     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#bae0a8f7611f878e77c0db6ec4cadecd" title="Set the Global Quality to a new value.">setGlobalQuality</a>(int32_t newQuality);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#be713a5c2457120817fe3156a6445bb1" title="Get the flags associated with this codec.">getFlags</a>();
<a name="l00096"></a>00096     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#810f00ec624a5fea2668df9414d79b38" title="Set the FFMPEG flags to use with this codec.">setFlags</a>(int32_t newFlags);
<a name="l00097"></a>00097     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#63e5caa7dd85559c9ea81cd1f3cd9e2f" title="Get the setting for the specified flag.">getFlag</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#7f129ebbe404af47858199c929d0d879" title="XUGGLER Flags that can be passed to the setFlag(Flags, bool) method.">Flags</a> flag);
<a name="l00098"></a>00098     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#c3999550315918737d0f5e1b4b765737" title="Set the flag.">setFlag</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#7f129ebbe404af47858199c929d0d879" title="XUGGLER Flags that can be passed to the setFlag(Flags, bool) method.">Flags</a> flag, <span class="keywordtype">bool</span> value);
<a name="l00099"></a>00099     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#7215694c124919baeaf61cb59d2611ef" title="For this stream, get the number of audio samples that are represented in a packet...">getAudioFrameSize</a>();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <span class="comment">/*</span>
<a name="l00102"></a>00102 <span class="comment">     * This section has the operational aspects of</span>
<a name="l00103"></a>00103 <span class="comment">     * a StreamCoder</span>
<a name="l00104"></a>00104 <span class="comment">     */</span>
<a name="l00105"></a>00105     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#f63b93f7ee8907256f45b1abf1f0dd5d" title="Open the Codec associated with this StreamCoder.">open</a>();
<a name="l00106"></a>00106     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#adadc04f0940c3afa23655ab67e86b73" title="Close a Codec that was opened on this StreamCoder.">close</a>();
<a name="l00107"></a>00107     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#5077165e8e719fedfce7810ce4016cd7" title="Decode this packet into pOutSamples.">decodeAudio</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IAudioSamples.html" title="A set of raw (decoded) samples, plus a timestamp for when to play those samples relative...">IAudioSamples</a> * pOutSamples,
<a name="l00108"></a>00108         <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPacket.html" title="Represents an encoded piece of data that can be placed in an IContainer for a given...">IPacket</a> *packet, int32_t byteOffset);
<a name="l00109"></a>00109     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#5febedd0e02c02da5cdb0d56de264835" title="Decode this packet into pOutFrame.">decodeVideo</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IVideoPicture.html" title="Represents one raw (undecoded) picture in a video stream, plus a timestamp for when...">IVideoPicture</a> * pOutFrame,
<a name="l00110"></a>00110         <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPacket.html" title="Represents an encoded piece of data that can be placed in an IContainer for a given...">IPacket</a> *packet, int32_t byteOffset);
<a name="l00111"></a>00111     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#4e8e90c3ba84aab18d7e17379c59c865" title="Encode the given frame using this StreamCoder.">encodeVideo</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPacket.html" title="Represents an encoded piece of data that can be placed in an IContainer for a given...">IPacket</a> *pOutPacket,
<a name="l00112"></a>00112         <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IVideoPicture.html" title="Represents one raw (undecoded) picture in a video stream, plus a timestamp for when...">IVideoPicture</a> * pFrame, int32_t suggestedBufferSize);
<a name="l00113"></a>00113     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#81102eae7e5d013057c3a38f9e636cbc" title="Encode the given samples using this StreamCoder.">encodeAudio</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IPacket.html" title="Represents an encoded piece of data that can be placed in an IContainer for a given...">IPacket</a> *pOutPacket,
<a name="l00114"></a>00114         <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IAudioSamples.html" title="A set of raw (decoded) samples, plus a timestamp for when to play those samples relative...">IAudioSamples</a>* pSamples, uint32_t sampleToStartFrom);
<a name="l00115"></a>00115 
<a name="l00116"></a>00116     <span class="keyword">virtual</span> int64_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#322018854233516dabd22740fbc9e5e3" title="For this stream, get the next Pts that we expect to decode.">getNextPredictedPts</a>();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#afc7dd7a6f0ee4157beeafc6c0561ac9" title="Returns the 4-byte FOURCC tag (Least Significant Byte first).">getCodecTag</a>();
<a name="l00119"></a>00119     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#44de26df5c2b94ff6a05edb0a25eb749" title="Set the 4-byte FOURCC tag for this coder.">setCodecTag</a>(int32_t);
<a name="l00120"></a>00120 
<a name="l00121"></a>00121     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#4b46738b73578892a602c9e4f5d86b9a" title="Returns the total number of settable properties on this object.">getNumProperties</a>();
<a name="l00122"></a>00122     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IProperty.html" title="Represents settable properties that effect how Xuggler objects operate.">IProperty</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#e455a70c2e5117f2606aef6e78851eb9" title="Returns the name of the numbered property.">getPropertyMetaData</a>(int32_t propertyNo);
<a name="l00123"></a>00123     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IProperty.html" title="Represents settable properties that effect how Xuggler objects operate.">IProperty</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#e455a70c2e5117f2606aef6e78851eb9" title="Returns the name of the numbered property.">getPropertyMetaData</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#11e185722fd04e12b149a920acccda58" title="Sets a property on this Object.">setProperty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keyword">const</span> <span class="keywordtype">char</span>* value);
<a name="l00126"></a>00126     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#11e185722fd04e12b149a920acccda58" title="Sets a property on this Object.">setProperty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">double</span> value);
<a name="l00127"></a>00127     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#11e185722fd04e12b149a920acccda58" title="Sets a property on this Object.">setProperty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, int64_t value);
<a name="l00128"></a>00128     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#11e185722fd04e12b149a920acccda58" title="Sets a property on this Object.">setProperty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">bool</span> value);
<a name="l00129"></a>00129     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#11e185722fd04e12b149a920acccda58" title="Sets a property on this Object.">setProperty</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name, <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a> *value);
<a name="l00130"></a>00130     
<a name="l00131"></a>00131     <span class="keyword">virtual</span> <span class="keywordtype">char</span> * <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#46ad55458a7bc58e68773cefc7a2bb46" title="Gets a property on this Object.">getPropertyAsString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00132"></a>00132     <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#860e21eba8f6a01bbd89658b62f9c51d" title="Gets the value of this property, and returns as a double;.">getPropertyAsDouble</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00133"></a>00133     <span class="keyword">virtual</span> int64_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#577f109de16549bebcfda6c275cd63c8" title="Gets the value of this property, and returns as an long;.">getPropertyAsLong</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00134"></a>00134     <span class="keyword">virtual</span>  <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a> *<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#67ec2cafa9879d66f862cdcd18ed831b" title="Gets the value of this property, and returns as an IRational;.">getPropertyAsRational</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00135"></a>00135     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#8198a8c1864f7e80360a32e3464e4be4" title="Gets the value of this property, and returns as a boolean.">getPropertyAsBoolean</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0fd9b5cc2bcabf4d605923f9559cef52" title="Returns true if this IStreamCoder is currently open.">isOpen</a>();
<a name="l00138"></a>00138 
<a name="l00139"></a>00139     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#35c1957cd69edc56727d8cb124ff0c64" title="Get the default audio frame size (in samples).">getDefaultAudioFrameSize</a>();
<a name="l00140"></a>00140     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#559e498fccb1698f959fd021948988bf" title="Set the default audio frame size.">setDefaultAudioFrameSize</a>(int32_t);
<a name="l00141"></a>00141     <span class="comment">// Not for calling from Java</span>
<a name="l00142"></a>00142     <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0d1c8aa67e3989f47ee5a11d82aaf2a9" title="Set the Codec to the passed in Codec, discarding the old Codec if set.">setCodec</a>(int32_t);
<a name="l00143"></a>00143 
<a name="l00148"></a>00148     <span class="keyword">static</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">StreamCoder</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#ce525892dddad9328378e914560b6465" title="This method creates a StreamCoder that is not tied to any container or stream.">make</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#89070b18b2b728e7c93a73fb65a15099" title="The Direction in which this StreamCoder will work.">Direction</a> direction);
<a name="l00149"></a>00149 
<a name="l00154"></a>00154     <span class="keyword">static</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">StreamCoder</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#ce525892dddad9328378e914560b6465" title="This method creates a StreamCoder that is not tied to any container or stream.">make</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#89070b18b2b728e7c93a73fb65a15099" title="The Direction in which this StreamCoder will work.">Direction</a> direction,
<a name="l00155"></a>00155         AVCodecContext *context, <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1Stream.html">Stream</a>* stream);
<a name="l00156"></a>00156     <span class="keyword">static</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html">StreamCoder</a>* <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#ce525892dddad9328378e914560b6465" title="This method creates a StreamCoder that is not tied to any container or stream.">make</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#89070b18b2b728e7c93a73fb65a15099" title="The Direction in which this StreamCoder will work.">Direction</a> direction, <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html" title="The work horse of the Xuggler: Takes IPacket data from an IContainer (representing...">IStreamCoder</a>* copyCoder);
<a name="l00157"></a>00157     
<a name="l00158"></a>00158     int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#256e4138f677f8cb183cc60254182ca5">setStream</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1Stream.html">Stream</a>*, <span class="keywordtype">bool</span> assumeOnlyStream);
<a name="l00159"></a>00159     int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#877735e5549d26eb3e22c67b11b7b4b3">streamClosed</a>(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1Stream.html">Stream</a>*);
<a name="l00160"></a>00160 
<a name="l00161"></a>00161     <span class="keyword">virtual</span> int64_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#dfb0fb4245829c6b69d0199794cbdab0" title="Get the number of frames this StreamCoder had to drop to encode at the specified...">getNumDroppedFrames</a>();
<a name="l00162"></a>00162     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#8fb1b9a720ffc81d4cfe813992619239" title="Should the IStreamCoder automatically adjust time stamps on output packets for the...">setAutomaticallyStampPacketsForStream</a>(<span class="keywordtype">bool</span> value);
<a name="l00163"></a>00163     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#cbb4270459aff43a8016d9cffc3ba466" title="Does this IStreamCoder automatically adjust time stamps on output packets for the...">getAutomaticallyStampPacketsForStream</a>();
<a name="l00164"></a>00164 
<a name="l00165"></a>00165     <span class="comment">// RefCounted interface</span>
<a name="l00166"></a>00166     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#0131a9f0262286143fe03caf5528f860" title="Internal Only.">acquire</a>();
<a name="l00167"></a>00167     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#1255b6ea6a270ed2391edcb0eab63c5f" title="Internal Only.">release</a>();
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#308231743dc003b0eb2a50b66948c8ca" title="Copies data from the given buffer into the extra-data area maintained by encoders...">setExtraData</a>(<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1IBuffer.html" title="Allows Java code to get data from a native buffers, and optionally modify native...">com::xuggle::ferry::IBuffer</a>* src, int32_t offset, int32_t length, <span class="keywordtype">bool</span> allocNew);
<a name="l00170"></a>00170     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#b3a67a201a8d07c137d3e3583dbdd1f4" title="Copies the current content of the extra-data buffer maintained by this codec (e.g...">getExtraData</a>(<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1IBuffer.html" title="Allows Java code to get data from a native buffers, and optionally modify native...">com::xuggle::ferry::IBuffer</a> *dest, int32_t offset, int32_t maxBytesToCopy);
<a name="l00171"></a>00171     <span class="keyword">virtual</span> int32_t <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#82786dc6502d13f4d33b4defc7cef81f" title="Gets the current number of bytes of data maintained in the coder extra-data area...">getExtraDataSize</a>();
<a name="l00172"></a>00172 
<a name="l00173"></a>00173   <span class="keyword">protected</span>:
<a name="l00174"></a>00174     <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#ed979bf4a49888aaaa4d26101451cb65">StreamCoder</a>();
<a name="l00175"></a>00175     <span class="keyword">virtual</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1StreamCoder.html#b9ceaa868d141ebab683005a5ccbaddf">~StreamCoder</a>();
<a name="l00176"></a>00176   <span class="keyword">private</span>:
<a name="l00177"></a>00177     <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IStreamCoder.html#89070b18b2b728e7c93a73fb65a15099" title="The Direction in which this StreamCoder will work.">Direction</a> mDirection;
<a name="l00178"></a>00178     AVCodecContext* mCodecContext;
<a name="l00179"></a>00179     <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1Stream.html">Stream</a>* mStream; <span class="comment">// Must not refcount this.</span>
<a name="l00180"></a>00180     <a class="code" href="classcom_1_1xuggle_1_1ferry_1_1RefPointer.html" title="This class is only useful from C++.">com::xuggle::ferry::RefPointer&lt;Codec&gt;</a> mCodec;
<a name="l00181"></a>00181     <span class="keywordtype">bool</span> mOpened;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="comment">// Variables used for patching up PTS values</span>
<a name="l00184"></a>00184     <a class="code" href="classcom_1_1xuggle_1_1ferry_1_1RefPointer.html" title="This class is only useful from C++.">com::xuggle::ferry::RefPointer&lt;IRational&gt;</a> mFakePtsTimeBase;
<a name="l00185"></a>00185     int64_t mLastPtsEncoded;
<a name="l00186"></a>00186     int64_t mFakeNextPts;
<a name="l00187"></a>00187     int64_t mFakeCurrPts;
<a name="l00188"></a>00188     int64_t mSamplesForEncoding;
<a name="l00189"></a>00189     int64_t mSamplesCoded;
<a name="l00190"></a>00190     int64_t mLastExternallySetTimeStamp;
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     <a class="code" href="classcom_1_1xuggle_1_1ferry_1_1RefPointer.html" title="This class is only useful from C++.">com::xuggle::ferry::RefPointer&lt;com::xuggle::ferry::IBuffer&gt;</a> mAudioFrameBuffer;
<a name="l00193"></a>00193     int32_t mBytesInFrameBuffer;
<a name="l00194"></a>00194     int64_t mStartingTimestampOfBytesInFrameBuffer;
<a name="l00195"></a>00195     int32_t mDefaultAudioFrameSize;
<a name="l00196"></a>00196     int64_t mNumDroppedFrames;
<a name="l00197"></a>00197     <span class="keywordtype">bool</span> mAutomaticallyStampPacketsForStream;
<a name="l00198"></a>00198     int64_t mPtsBuffer[MAX_REORDER_DELAY+1];
<a name="l00199"></a>00199     
<a name="l00200"></a>00200     int32_t calcAudioFrameSize();
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="keywordtype">void</span> setCodecInternal(int32_t <span class="keywordtype">id</span>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204     <span class="keywordtype">void</span> reset();
<a name="l00205"></a>00205     <span class="keywordtype">void</span> setPacketParameters(<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1Packet.html">Packet</a> *packet, int32_t size,
<a name="l00206"></a>00206         int64_t dts,
<a name="l00207"></a>00207         <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1IRational.html" title="This class wraps represents a Rational number for the Xuggler.">IRational</a> * timebase,
<a name="l00208"></a>00208         <span class="keywordtype">bool</span> keyframe,
<a name="l00209"></a>00209         int64_t duration);
<a name="l00210"></a>00210   };
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 }}}
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 <span class="preprocessor">#endif </span><span class="comment">/*STREAMCODER_H_*/</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 11 07:39:28 2011 for Xuggle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
