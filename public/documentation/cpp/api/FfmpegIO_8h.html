<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Xuggle: csrc/com/xuggle/xuggler/io/FfmpegIO.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_699738047d3b635b5df656916dee49ce.html">csrc</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_2cb158fd786e896c09be7d68a3b6a246.html">com</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_f3de956f4e588203bf9fcd5328f2c68a.html">xuggle</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_e5fb9c1226b415098404852adc3e90da.html">xuggler</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_46cc1df890177ff7611ae3bab02ed376.html">io</a>
  </div>
</div>
<div class="contents">
<h1>FfmpegIO.h File Reference</h1>
<p>
<code>#include &lt;jni.h&gt;</code><br>

<p>
<div class="dynheader">
Include dependency graph for FfmpegIO.h:</div>
<div class="dynsection">
<p><center><img src="FfmpegIO_8h__incl.png" border="0" usemap="#csrc/com/xuggle/xuggler/io/FfmpegIO.h_map" alt=""></center>
</div>

<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<p><center><img src="FfmpegIO_8h__dep__incl.png" border="0" usemap="#csrc/com/xuggle/xuggler/io/FfmpegIO.hdep_map" alt=""></center>
<map name="csrc/com/xuggle/xuggler/io/FfmpegIO.hdep_map">
<area shape="rect" href="FfmpegIO_8cpp.html" title="csrc/com/xuggle/xuggler/io/FfmpegIO.cpp" alt="" coords="5,84,288,110"></map>
</div>

<p>
<a href="FfmpegIO_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT void JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#7521a7c0fb1c11401e686eb654d0b6ab">Java_com_xuggle_xuggler_io_FfmpegIO_init</a> (JNIEnv *env, jclass)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jint JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#be651ad051e88b28c39b5786753dd77d">Java_com_xuggle_xuggler_io_FfmpegIO_native_1registerProtocolHandler</a> (JNIEnv *, jclass, jstring, jobject)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jint JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#abfa317513611bdcb42d93bd3fd29095">Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1open</a> (JNIEnv *, jclass, jobject, jstring, jint)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jint JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#34edea7e560bf0e0a3877661dc05bf85">Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1read</a> (JNIEnv *, jclass, jobject, jbyteArray, jint)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jint JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#d42b691d1a9a52a6bf81bd60bc2f9aed">Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1write</a> (JNIEnv *, jclass, jobject, jbyteArray, jint)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jlong JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#23f51c0976ab28a276fa2506a04ecedb">Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1seek</a> (JNIEnv *, jclass, jobject, jlong, jint)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">JNIEXPORT jint JNICALL&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="FfmpegIO_8h.html#dfd1e7f1f0ccff57339942a698fa65f0">Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1close</a> (JNIEnv *, jclass, jobject)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="7521a7c0fb1c11401e686eb654d0b6ab"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_init" ref="7521a7c0fb1c11401e686eb654d0b6ab" args="(JNIEnv *env, jclass)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT void JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_init           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname"> <em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00055">55</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00045">com::xuggle::ferry::JNIHelper::sGetVM()</a>, and <a class="el" href="JNIHelper_8h-source.html#l00049">com::xuggle::ferry::JNIHelper::sSetVM()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00056"></a>00056 {
<a name="l00057"></a>00057   JavaVM* vm=0;
<a name="l00058"></a>00058   <span class="keywordflow">if</span> (!<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#6245a576904ad046bff11ded46fc7d0e">com::xuggle::ferry::JNIHelper::sGetVM</a>()) {
<a name="l00059"></a>00059     env-&gt;GetJavaVM(&amp;vm);
<a name="l00060"></a>00060     <a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fc4f24ac97bb588e912284e7a3263f53">com::xuggle::ferry::JNIHelper::sSetVM</a>(vm);
<a name="l00061"></a>00061     av_register_all();
<a name="l00062"></a>00062   }
<a name="l00063"></a>00063 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="be651ad051e88b28c39b5786753dd77d"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1registerProtocolHandler" ref="be651ad051e88b28c39b5786753dd77d" args="(JNIEnv *, jclass, jstring, jobject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jint JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1registerProtocolHandler           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jstring&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00065">65</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#0e1992558531bd77668673dc6fa682e5">ffurl_register_protocol()</a>, and <a class="el" href="URLProtocolManager_8cpp-source.html#l00116">com::xuggle::xuggler::io::URLProtocolManager::getURLProtocol()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00067"></a>00067 {
<a name="l00068"></a>00068   <span class="keywordtype">int</span> retval = -1;
<a name="l00069"></a>00069   <span class="keyword">const</span> <span class="keywordtype">char</span> *protoName= NULL;
<a name="l00070"></a>00070   protoName = jenv-&gt;GetStringUTFChars(aProtoName, NULL);
<a name="l00071"></a>00071   <span class="keywordflow">if</span> (protoName != NULL)
<a name="l00072"></a>00072   {
<a name="l00073"></a>00073     <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1io_1_1URLProtocolManager.html">URLProtocolManager</a>* mgr = <span class="keyword">new</span> <a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1io_1_1URLProtocolManager.html">URLProtocolManager</a>(protoName, aProtoMgr);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     URLProtocol* proto = mgr-&gt;<a class="code" href="classcom_1_1xuggle_1_1xuggler_1_1io_1_1URLProtocolManager.html#05a0e0fee9c621538c7b920a55ab969d">getURLProtocol</a>();
<a name="l00076"></a>00076     retval = <a class="code" href="FfmpegIO_8cpp.html#0e1992558531bd77668673dc6fa682e5">ffurl_register_protocol</a>(proto, <span class="keyword">sizeof</span>(<a class="code" href="structURLProtocolWrapper.html">URLProtocolWrapper</a>));
<a name="l00077"></a>00077 
<a name="l00078"></a>00078     jenv-&gt;ReleaseStringUTFChars(aProtoName, protoName);
<a name="l00079"></a>00079     protoName = NULL;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <span class="comment">// Yes, we deliberately leak the URLProtocolManager...</span>
<a name="l00082"></a>00082   }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084   <span class="keywordflow">return</span> retval;
<a name="l00085"></a>00085 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dfd1e7f1f0ccff57339942a698fa65f0"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1close" ref="dfd1e7f1f0ccff57339942a698fa65f0" args="(JNIEnv *, jclass, jobject)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jint JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1close           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00246">246</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#894b202e9a254d9136a9233a894ba26e">ffurl_close()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00248"></a>00248 {
<a name="l00249"></a>00249   URLContext*handleVal= NULL;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251   jint retval = -1;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   handleVal = (URLContext*)JNIHelper::sGetPointer(handle);
<a name="l00254"></a>00254   <span class="keywordflow">try</span>
<a name="l00255"></a>00255   {
<a name="l00256"></a>00256     retval = <a class="code" href="FfmpegIO_8cpp.html#894b202e9a254d9136a9233a894ba26e">ffurl_close</a>(handleVal);
<a name="l00257"></a>00257   }
<a name="l00258"></a>00258   <span class="keywordflow">catch</span>(std::exception &amp; e)
<a name="l00259"></a>00259   {
<a name="l00260"></a>00260     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00261"></a>00261     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00262"></a>00262     {
<a name="l00263"></a>00263       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00264"></a>00264       jenv-&gt;ThrowNew(cls, e.what());
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266     retval = -1;
<a name="l00267"></a>00267   }
<a name="l00268"></a>00268   <span class="keywordflow">catch</span>(...)
<a name="l00269"></a>00269   {
<a name="l00270"></a>00270     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00271"></a>00271     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00274"></a>00274       jenv-&gt;ThrowNew(cls, <span class="stringliteral">"Unhandled and unknown native exception"</span>);
<a name="l00275"></a>00275     }
<a name="l00276"></a>00276     retval = -1;
<a name="l00277"></a>00277   }
<a name="l00278"></a>00278   <span class="keywordflow">return</span> retval;
<a name="l00279"></a>00279 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="abfa317513611bdcb42d93bd3fd29095"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1open" ref="abfa317513611bdcb42d93bd3fd29095" args="(JNIEnv *, jclass, jobject, jstring, jint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jint JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1open           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jstring&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jint&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00087">87</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#69882bbe44ff276ec9c8c4d2b4fd149e">ffurl_open()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00089"></a>00089 {
<a name="l00090"></a>00090   URLContext*handleVal= NULL;
<a name="l00091"></a>00091   <span class="keyword">const</span> <span class="keywordtype">char</span> *nativeURL= NULL;
<a name="l00092"></a>00092   jint retval = -1;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094   nativeURL = jenv-&gt;GetStringUTFChars(url, NULL);
<a name="l00095"></a>00095   <span class="keywordflow">if</span> (nativeURL != NULL)
<a name="l00096"></a>00096   {
<a name="l00097"></a>00097     <span class="keywordflow">try</span>
<a name="l00098"></a>00098     {
<a name="l00099"></a>00099       retval = <a class="code" href="FfmpegIO_8cpp.html#69882bbe44ff276ec9c8c4d2b4fd149e">ffurl_open</a>(&amp;handleVal, nativeURL, flags);
<a name="l00100"></a>00100     }
<a name="l00101"></a>00101     <span class="keywordflow">catch</span>(std::exception &amp; e)
<a name="l00102"></a>00102     {
<a name="l00103"></a>00103       <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00104"></a>00104       <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00105"></a>00105       {
<a name="l00106"></a>00106         jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00107"></a>00107         jenv-&gt;ThrowNew(cls, e.what());
<a name="l00108"></a>00108       }
<a name="l00109"></a>00109       retval = -1;
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111     <span class="keywordflow">catch</span>(...)
<a name="l00112"></a>00112     {
<a name="l00113"></a>00113       <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00114"></a>00114       <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00115"></a>00115       {
<a name="l00116"></a>00116         jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00117"></a>00117         jenv-&gt;ThrowNew(cls, <span class="stringliteral">"Unhandled and unknown native exception"</span>);
<a name="l00118"></a>00118       }
<a name="l00119"></a>00119       retval = -1;
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="comment">// regardless of what the function returns, set the pointer</span>
<a name="l00123"></a>00123     JNIHelper::sSetPointer(handle, handleVal);
<a name="l00124"></a>00124   }
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   <span class="comment">// free the string</span>
<a name="l00127"></a>00127   <span class="keywordflow">if</span> (nativeURL != NULL)
<a name="l00128"></a>00128   {
<a name="l00129"></a>00129     jenv-&gt;ReleaseStringUTFChars(url, nativeURL);
<a name="l00130"></a>00130     nativeURL = NULL;
<a name="l00131"></a>00131   }
<a name="l00132"></a>00132   <span class="keywordflow">return</span> retval;
<a name="l00133"></a>00133 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="34edea7e560bf0e0a3877661dc05bf85"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1read" ref="34edea7e560bf0e0a3877661dc05bf85" args="(JNIEnv *, jclass, jobject, jbyteArray, jint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jint JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1read           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jbyteArray&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jint&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00135">135</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#451aa14ea2eee6d188543213606f8385">ffurl_read()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00137"></a>00137 {
<a name="l00138"></a>00138   URLContext*handleVal= NULL;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   jint retval = -1;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   handleVal = (URLContext*)JNIHelper::sGetPointer(handle);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144   jbyte *byteArray = jenv-&gt;GetByteArrayElements(javaBuf, NULL);
<a name="l00145"></a>00145   <span class="keywordflow">try</span>
<a name="l00146"></a>00146   {
<a name="l00147"></a>00147     retval = <a class="code" href="FfmpegIO_8cpp.html#451aa14ea2eee6d188543213606f8385">ffurl_read</a>(handleVal, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)byteArray, buflen);
<a name="l00148"></a>00148   }
<a name="l00149"></a>00149   <span class="keywordflow">catch</span>(std::exception &amp; e)
<a name="l00150"></a>00150   {
<a name="l00151"></a>00151     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00152"></a>00152     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00153"></a>00153     {
<a name="l00154"></a>00154       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00155"></a>00155       jenv-&gt;ThrowNew(cls, e.what());
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157     retval = -1;
<a name="l00158"></a>00158   }
<a name="l00159"></a>00159   <span class="keywordflow">catch</span>(...)
<a name="l00160"></a>00160   {
<a name="l00161"></a>00161     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00162"></a>00162     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00163"></a>00163     {
<a name="l00164"></a>00164       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00165"></a>00165       jenv-&gt;ThrowNew(cls, <span class="stringliteral">"Unhandled and unknown native exception"</span>);
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167     retval = -1;
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169   jenv-&gt;ReleaseByteArrayElements(javaBuf, byteArray, 0);
<a name="l00170"></a>00170   <span class="keywordflow">return</span> retval;
<a name="l00171"></a>00171 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="23f51c0976ab28a276fa2506a04ecedb"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1seek" ref="23f51c0976ab28a276fa2506a04ecedb" args="(JNIEnv *, jclass, jobject, jlong, jint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jlong JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1seek           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jlong&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jint&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00211">211</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#763caab3ade415557825f6bc548a6978">ffurl_seek()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00213"></a>00213 {
<a name="l00214"></a>00214   URLContext*handleVal= NULL;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216   jint retval = -1;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   handleVal = (URLContext*)JNIHelper::sGetPointer(handle);
<a name="l00219"></a>00219   <span class="keywordflow">try</span>
<a name="l00220"></a>00220   {
<a name="l00221"></a>00221     retval = <a class="code" href="FfmpegIO_8cpp.html#763caab3ade415557825f6bc548a6978">ffurl_seek</a>(handleVal, position, whence);
<a name="l00222"></a>00222   }
<a name="l00223"></a>00223   <span class="keywordflow">catch</span>(std::exception &amp; e)
<a name="l00224"></a>00224   {
<a name="l00225"></a>00225     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00226"></a>00226     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00227"></a>00227     {
<a name="l00228"></a>00228       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00229"></a>00229       jenv-&gt;ThrowNew(cls, e.what());
<a name="l00230"></a>00230     }
<a name="l00231"></a>00231     retval = -1;
<a name="l00232"></a>00232   }
<a name="l00233"></a>00233   <span class="keywordflow">catch</span>(...)
<a name="l00234"></a>00234   {
<a name="l00235"></a>00235     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00236"></a>00236     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00237"></a>00237     {
<a name="l00238"></a>00238       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00239"></a>00239       jenv-&gt;ThrowNew(cls, <span class="stringliteral">"Unhandled and unknown native exception"</span>);
<a name="l00240"></a>00240     }
<a name="l00241"></a>00241     retval = -1;
<a name="l00242"></a>00242   }
<a name="l00243"></a>00243   <span class="keywordflow">return</span> retval;
<a name="l00244"></a>00244 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d42b691d1a9a52a6bf81bd60bc2f9aed"></a><!-- doxytag: member="FfmpegIO.h::Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1write" ref="d42b691d1a9a52a6bf81bd60bc2f9aed" args="(JNIEnv *, jclass, jobject, jbyteArray, jint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">JNIEXPORT jint JNICALL Java_com_xuggle_xuggler_io_FfmpegIO_native_1url_1write           </td>
          <td>(</td>
          <td class="paramtype">JNIEnv *&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jclass&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jobject&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jbyteArray&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">jint&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="FfmpegIO_8cpp-source.html#l00173">173</a> of file <a class="el" href="FfmpegIO_8cpp-source.html">FfmpegIO.cpp</a>.</p>

<p>References <a class="el" href="FfmpegIO_8cpp.html#c1d123f423ddc77939136919c75f44ba">ffurl_write()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00175"></a>00175 {
<a name="l00176"></a>00176   URLContext*handleVal= NULL;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178   jint retval = -1;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180   handleVal = (URLContext*)JNIHelper::sGetPointer(handle);
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   jbyte *byteArray = jenv-&gt;GetByteArrayElements(javaBuf, NULL);
<a name="l00183"></a>00183   <span class="keywordflow">try</span>
<a name="l00184"></a>00184   {
<a name="l00185"></a>00185     retval = <a class="code" href="FfmpegIO_8cpp.html#c1d123f423ddc77939136919c75f44ba">ffurl_write</a>(handleVal, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)byteArray, buflen);
<a name="l00186"></a>00186   }
<a name="l00187"></a>00187   <span class="keywordflow">catch</span>(std::exception &amp; e)
<a name="l00188"></a>00188   {
<a name="l00189"></a>00189     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00190"></a>00190     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00193"></a>00193       jenv-&gt;ThrowNew(cls, e.what());
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195     retval = -1;
<a name="l00196"></a>00196   }
<a name="l00197"></a>00197   <span class="keywordflow">catch</span>(...)
<a name="l00198"></a>00198   {
<a name="l00199"></a>00199     <span class="comment">// we don't let a native exception override a java exception</span>
<a name="l00200"></a>00200     <span class="keywordflow">if</span> (!jenv-&gt;ExceptionCheck())
<a name="l00201"></a>00201     {
<a name="l00202"></a>00202       jclass cls=jenv-&gt;FindClass(<span class="stringliteral">"java/lang/RuntimeException"</span>);
<a name="l00203"></a>00203       jenv-&gt;ThrowNew(cls, <span class="stringliteral">"Unhandled and unknown native exception"</span>);
<a name="l00204"></a>00204     }
<a name="l00205"></a>00205     retval = -1;
<a name="l00206"></a>00206   }
<a name="l00207"></a>00207   jenv-&gt;ReleaseByteArrayElements(javaBuf, byteArray, 0);
<a name="l00208"></a>00208   <span class="keywordflow">return</span> retval;
<a name="l00209"></a>00209 }
</pre></div>
<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 11 07:39:49 2011 for Xuggle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
