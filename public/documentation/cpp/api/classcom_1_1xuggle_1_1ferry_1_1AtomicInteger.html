<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Xuggle: com::xuggle::ferry::AtomicInteger Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespacecom.html">com</a>::<a class="el" href="namespacecom_1_1xuggle.html">xuggle</a>::<a class="el" href="namespacecom_1_1xuggle_1_1ferry.html">ferry</a>::<a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html">AtomicInteger</a>
  </div>
</div>
<div class="contents">
<h1>com::xuggle::ferry::AtomicInteger Class Reference</h1><!-- doxytag: class="com::xuggle::ferry::AtomicInteger" --><code>#include &lt;<a class="el" href="AtomicInteger_8h-source.html">AtomicInteger.h</a>&gt;</code>
<p>

<p>
<a href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Internal only. 
<p>
Atomic Integer represents Integers than can be updated atomically from native code. <p>
This object is NOT meant to be called from Java (in fact, that'd be stupid since you'd just be calling from native code back into Java). It's here so that native code inside a JVM can have access to portable thread-safe objects.  <p>
And that said, this method is really only Atomic if running inside a Java JVM (or other virtual machine that can provide the functionality). If running in a standalone C++ program there is no current guarantee of Atomicity. <p>
The object just forwards to the Java object: <a class="el" href="">java.util.concurrent.atomic.AtomicInteger</a>  
<p>Definition at line <a class="el" href="AtomicInteger_8h-source.html#l00045">45</a> of file <a class="el" href="AtomicInteger_8h-source.html">AtomicInteger.h</a>.</p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#ef16b034640dcea3c6c29e9a178ebebc">AtomicInteger</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#f15324904cfb8987926bfa69b9c8e5ee">AtomicInteger</a> (int32_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#3a66d238d6fe9f06098f64ced1eefdd1">~AtomicInteger</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#f371a3394429616d9206534231b3cbb1">get</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#5c11d04fa8d96f6df2c6baeb175c512e">set</a> (int32_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#0c185cb3a9d553cfb74a2397bc79ba2c">getAndSet</a> (int32_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#220c99f4181e53d9e2c3b3a2cb4b8217">getAndIncrement</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#6e9c6bc098b67d512b2a2129e5b82d08">getAndDecrement</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#4fcad80bdaf44668ae93a9494c1e4081">getAndAdd</a> (int32_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#97d20324c6fa12e48fbd601e0920b913">incrementAndGet</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#24bac54e5d559980695d6c477b1f8d4c">decrementAndGet</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#d234ad8f0f801f45c1cf683a8c42b46e">addAndGet</a> (int32_t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#20b21766b3d74d57c1fae92d668e1179">compareAndSet</a> (int32_t expected, int32_t update)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Compare the current value to expected, and if they are equal, set the current value to update.  <a href="#20b21766b3d74d57c1fae92d668e1179"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#d26da24e8399d27a60cad71c60833ae9">isAtomic</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcom_1_1xuggle_1_1ferry_1_1AtomicInteger.html#025aa836ce229ba46eaa74b5069c8da3">JNIHelper</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ef16b034640dcea3c6c29e9a178ebebc"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::AtomicInteger" ref="ef16b034640dcea3c6c29e9a178ebebc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">com::xuggle::ferry::AtomicInteger::AtomicInteger           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00117">117</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00118"></a>00118   {
<a name="l00119"></a>00119     initializeObject();
<a name="l00120"></a>00120   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f15324904cfb8987926bfa69b9c8e5ee"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::AtomicInteger" ref="f15324904cfb8987926bfa69b9c8e5ee" args="(int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">com::xuggle::ferry::AtomicInteger::AtomicInteger           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>val</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00122">122</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123   {
<a name="l00124"></a>00124     mNonAtomicValue = 0;
<a name="l00125"></a>00125     mAtomicValue = 0;
<a name="l00126"></a>00126     initializeObject();
<a name="l00127"></a>00127     this-&gt;<span class="keyword">set</span>(val);
<a name="l00128"></a>00128   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3a66d238d6fe9f06098f64ced1eefdd1"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::~AtomicInteger" ref="3a66d238d6fe9f06098f64ced1eefdd1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">com::xuggle::ferry::AtomicInteger::~AtomicInteger           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00130">130</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00131"></a>00131   {
<a name="l00132"></a>00132     <span class="keywordflow">if</span> (mAtomicValue)
<a name="l00133"></a>00133     {
<a name="l00134"></a>00134       JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00135"></a>00135       <span class="keywordflow">if</span> (env)
<a name="l00136"></a>00136       {
<a name="l00137"></a>00137         env-&gt;DeleteGlobalRef(mAtomicValue);
<a name="l00138"></a>00138         mAtomicValue = 0;
<a name="l00139"></a>00139       }
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141   }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="f371a3394429616d9206534231b3cbb1"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::get" ref="f371a3394429616d9206534231b3cbb1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::get           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00144">144</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>

<p>Referenced by <a class="el" href="RefCounted_8cpp-source.html#l00080">com::xuggle::ferry::RefCounted::getCurrentRefCount()</a>, and <a class="el" href="Main_8cpp-source.html#l00028">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00145"></a>00145   {
<a name="l00146"></a>00146     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00147"></a>00147     int32_t val = 0;
<a name="l00148"></a>00148 
<a name="l00149"></a>00149     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00150"></a>00150       val = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00151"></a>00151           mGetMethod);
<a name="l00152"></a>00152     <span class="keywordflow">else</span>
<a name="l00153"></a>00153       val = mNonAtomicValue;
<a name="l00154"></a>00154     <span class="keywordflow">return</span> val;
<a name="l00155"></a>00155   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5c11d04fa8d96f6df2c6baeb175c512e"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::set" ref="5c11d04fa8d96f6df2c6baeb175c512e" args="(int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com::xuggle::ferry::AtomicInteger::set           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00158">158</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00159"></a>00159   {
<a name="l00160"></a>00160     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00161"></a>00161 
<a name="l00162"></a>00162     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00163"></a>00163       env-&gt;CallVoidMethod(mAtomicValue,
<a name="l00164"></a>00164           mSetMethod, newval);
<a name="l00165"></a>00165     <span class="keywordflow">else</span>
<a name="l00166"></a>00166       mNonAtomicValue=newval;
<a name="l00167"></a>00167   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0c185cb3a9d553cfb74a2397bc79ba2c"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::getAndSet" ref="0c185cb3a9d553cfb74a2397bc79ba2c" args="(int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::getAndSet           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00170">170</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00171"></a>00171   {
<a name="l00172"></a>00172     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00173"></a>00173     int32_t retval = 0;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00176"></a>00176       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00177"></a>00177           mGetAndSetMethod, newval);
<a name="l00178"></a>00178     <span class="keywordflow">else</span> {
<a name="l00179"></a>00179       retval = mNonAtomicValue;
<a name="l00180"></a>00180       mNonAtomicValue = newval;
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182     <span class="keywordflow">return</span> retval;
<a name="l00183"></a>00183   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="220c99f4181e53d9e2c3b3a2cb4b8217"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::getAndIncrement" ref="220c99f4181e53d9e2c3b3a2cb4b8217" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::getAndIncrement           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00186">186</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>

<p>Referenced by <a class="el" href="Main_8cpp-source.html#l00028">main()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00187"></a>00187   {
<a name="l00188"></a>00188     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00189"></a>00189     int32_t retval = 0;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00192"></a>00192       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00193"></a>00193           mGetAndIncrementMethod);
<a name="l00194"></a>00194     <span class="keywordflow">else</span>
<a name="l00195"></a>00195       retval = mNonAtomicValue++;
<a name="l00196"></a>00196     <span class="keywordflow">return</span> retval;
<a name="l00197"></a>00197   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6e9c6bc098b67d512b2a2129e5b82d08"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::getAndDecrement" ref="6e9c6bc098b67d512b2a2129e5b82d08" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::getAndDecrement           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00200">200</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00201"></a>00201   {
<a name="l00202"></a>00202     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00203"></a>00203     int32_t retval = 0;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00206"></a>00206       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00207"></a>00207           mGetAndDecrementMethod);
<a name="l00208"></a>00208     <span class="keywordflow">else</span>
<a name="l00209"></a>00209       retval = mNonAtomicValue--;
<a name="l00210"></a>00210     <span class="keywordflow">return</span> retval;
<a name="l00211"></a>00211   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4fcad80bdaf44668ae93a9494c1e4081"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::getAndAdd" ref="4fcad80bdaf44668ae93a9494c1e4081" args="(int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::getAndAdd           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00214">214</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00215"></a>00215   {
<a name="l00216"></a>00216     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00217"></a>00217     int32_t retval = 0;
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00220"></a>00220       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00221"></a>00221           mGetAndAddMethod, newval);
<a name="l00222"></a>00222     <span class="keywordflow">else</span> {
<a name="l00223"></a>00223       retval = mNonAtomicValue;
<a name="l00224"></a>00224       mNonAtomicValue += newval;
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     }
<a name="l00227"></a>00227     <span class="keywordflow">return</span> retval;
<a name="l00228"></a>00228   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="97d20324c6fa12e48fbd601e0920b913"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::incrementAndGet" ref="97d20324c6fa12e48fbd601e0920b913" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::incrementAndGet           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00231">231</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>

<p>Referenced by <a class="el" href="RefCounted_8cpp-source.html#l00063">com::xuggle::ferry::RefCounted::acquire()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00232"></a>00232   {
<a name="l00233"></a>00233     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00234"></a>00234     int32_t retval = 0;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00237"></a>00237       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00238"></a>00238           mIncrementAndGetMethod);
<a name="l00239"></a>00239     <span class="keywordflow">else</span>
<a name="l00240"></a>00240       retval = (++mNonAtomicValue);
<a name="l00241"></a>00241     <span class="keywordflow">return</span> retval;
<a name="l00242"></a>00242   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="24bac54e5d559980695d6c477b1f8d4c"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::decrementAndGet" ref="24bac54e5d559980695d6c477b1f8d4c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::decrementAndGet           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00245">245</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>

<p>Referenced by <a class="el" href="RefCounted_8cpp-source.html#l00070">com::xuggle::ferry::RefCounted::release()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00246"></a>00246   {
<a name="l00247"></a>00247     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00248"></a>00248     int32_t retval = 0;
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00251"></a>00251       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00252"></a>00252           mDecrementAndGetMethod);
<a name="l00253"></a>00253     <span class="keywordflow">else</span>
<a name="l00254"></a>00254       retval = (--mNonAtomicValue);
<a name="l00255"></a>00255     <span class="keywordflow">return</span> retval;
<a name="l00256"></a>00256   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d234ad8f0f801f45c1cf683a8c42b46e"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::addAndGet" ref="d234ad8f0f801f45c1cf683a8c42b46e" args="(int32_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com::xuggle::ferry::AtomicInteger::addAndGet           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>newval</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00259">259</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00260"></a>00260   {
<a name="l00261"></a>00261     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00262"></a>00262     int32_t retval = 0;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00265"></a>00265       retval = env-&gt;CallIntMethod(mAtomicValue,
<a name="l00266"></a>00266           mAddAndGetMethod, newval);
<a name="l00267"></a>00267     <span class="keywordflow">else</span> {
<a name="l00268"></a>00268       mNonAtomicValue += newval;
<a name="l00269"></a>00269       retval = mNonAtomicValue;
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271     <span class="keywordflow">return</span> retval;
<a name="l00272"></a>00272   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="20b21766b3d74d57c1fae92d668e1179"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::compareAndSet" ref="20b21766b3d74d57c1fae92d668e1179" args="(int32_t expected, int32_t update)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool com::xuggle::ferry::AtomicInteger::compareAndSet           </td>
          <td>(</td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&nbsp;</td>
          <td class="paramname"> <em>update</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Compare the current value to expected, and if they are equal, set the current value to update. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>expected</em>&nbsp;</td><td>the value expected </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>update</em>&nbsp;</td><td>the value to update to </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if equal </dd></dl>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00275">275</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>

<p>References <a class="el" href="JNIHelper_8h-source.html#l00057">com::xuggle::ferry::JNIHelper::sGetEnv()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00276"></a>00276   {
<a name="l00277"></a>00277     JNIEnv *env=<a class="code" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html#fd48d5f0a9c39c7101cffe3cc5178356">JNIHelper::sGetEnv</a>();
<a name="l00278"></a>00278     <span class="keywordtype">bool</span> retval = <span class="keyword">false</span>;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <span class="keywordflow">if</span> (mAtomicValue &amp;&amp; env)
<a name="l00281"></a>00281       retval = env-&gt;CallBooleanMethod(mAtomicValue,
<a name="l00282"></a>00282           mCompareAndSetMethod, expected, update);
<a name="l00283"></a>00283     <span class="keywordflow">else</span> {
<a name="l00284"></a>00284       retval = (mNonAtomicValue == expected);
<a name="l00285"></a>00285       <span class="keywordflow">if</span> (retval)
<a name="l00286"></a>00286       {
<a name="l00287"></a>00287         mNonAtomicValue = update;
<a name="l00288"></a>00288       }
<a name="l00289"></a>00289     }
<a name="l00290"></a>00290     <span class="keywordflow">return</span> retval;
<a name="l00291"></a>00291   }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d26da24e8399d27a60cad71c60833ae9"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::isAtomic" ref="d26da24e8399d27a60cad71c60833ae9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool com::xuggle::ferry::AtomicInteger::isAtomic           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if we're actually able to guarantee atomicity; false if we can't. </dd></dl>

<p>Definition at line <a class="el" href="AtomicInteger_8cpp-source.html#l00294">294</a> of file <a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00295"></a>00295   {
<a name="l00296"></a>00296     <span class="keywordflow">return</span> init() &amp;&amp; mAtomicValue != 0;
<a name="l00297"></a>00297   }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="025aa836ce229ba46eaa74b5069c8da3"></a><!-- doxytag: member="com::xuggle::ferry::AtomicInteger::JNIHelper" ref="025aa836ce229ba46eaa74b5069c8da3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcom_1_1xuggle_1_1ferry_1_1JNIHelper.html">JNIHelper</a><code> [friend]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="AtomicInteger_8h-source.html#l00078">78</a> of file <a class="el" href="AtomicInteger_8h-source.html">AtomicInteger.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>csrc/com/xuggle/ferry/<a class="el" href="AtomicInteger_8h-source.html">AtomicInteger.h</a><li>csrc/com/xuggle/ferry/<a class="el" href="AtomicInteger_8cpp-source.html">AtomicInteger.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 11 07:40:04 2011 for Xuggle by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
